<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>FC26 Saitama Open Arena • Table</title>
    <style>
        body {
            font-family: system-ui;
            margin: 0;
            background: #0b0f16;
            color: #e6ebf2
        }

        .wrap {
            max-width: 1100px;
            margin: 0 auto;
            padding: 16px
        }

        a {
            color: #4da3ff;
            text-decoration: none
        }

        .top {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between
        }

        .pill {
            display: inline-flex;
            gap: 8px;
            align-items: center;
            background: #0f1526;
            border: 1px solid #2a3248;
            border-radius: 999px;
            padding: 8px 10px
        }

        .card {
            background: #121826;
            border-radius: 14px;
            padding: 14px;
            margin: 12px 0
        }

        .big {
            font-size: 18px;
            font-weight: 1000
        }

        .muted {
            color: #8a93a6;
            font-size: 13px
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px
        }

        th,
        td {
            border-bottom: 1px solid #2a3248;
            padding: 10px;
            text-align: left
        }

        th {
            color: #8a93a6;
            font-weight: 900
        }

        .badge {
            display: inline-block;
            border: 1px solid #2a3248;
            color: #8a93a6;
            padding: 2px 8px;
            border-radius: 999px;
            font-size: 12px
        }
    </style>
</head>

<body>
    <div class="wrap">
        <div class="top">
            <div class="pill"><b>FC26 Saitama Open Arena</b><span class="muted">Table</span></div>
            <div class="pill"><a href="./index.html">Home</a> · <a href="./bracket.html">Bracket</a></div>
        </div>

        <div class="card">
            <div class="big">Standings (Group)</div>
            <div class="muted">Win 3 / Draw 1 / Loss 0 — GF/GA/GD</div>
            <div id="standings"></div>
        </div>

        <div class="card">
            <div class="big">Fixtures (Group)</div>
            <div class="muted">3 rounds • 6 matches</div>
            <div id="fixtures"></div>
        </div>
    </div>

    <script type="module">
        import { load } from "./js/app_state.js";
        import { playerName } from "./js/ui_shared.js";

        const s = load();
        if (!s?.tournament) { location.href = "./index.html"; }
        const t = s.tournament;

        function standingsTable() {
            const rows = t.group.standings.map((p, i) => `
      <tr>
        <td>${i + 1}</td>
        <td><b>${p.name}</b></td>
        <td>${p.stats.played}</td>
        <td>${p.stats.win}</td>
        <td>${p.stats.draw}</td>
        <td>${p.stats.loss}</td>
        <td>${p.stats.gf}</td>
        <td>${p.stats.ga}</td>
        <td>${p.stats.gd}</td>
        <td><b>${p.stats.pts}</b></td>
      </tr>
    `).join("");

            return `
      <table>
        <thead>
          <tr>
            <th>#</th><th>Player</th><th>P</th><th>W</th><th>D</th><th>L</th><th>GF</th><th>GA</th><th>GD</th><th>PTS</th>
          </tr>
        </thead>
        <tbody>${rows}</tbody>
      </table>
      <div class="muted" style="margin-top:10px">
        <span class="badge">#1</span> vào thẳng Final (Seed 1) •
        <span class="badge">#2</span> chờ Playoff 2 •
        <span class="badge">#3-#4</span> đá Playoff 1
      </div>
    `;
        }

        function fixturesTable() {
            const groups = [1, 2, 3].map(r => {
                const matches = t.group.matches.filter(m => m.round === r);
                const rows = matches.map(m => {
                    const a = playerName(t, m.aId);
                    const b = playerName(t, m.bId);
                    const sc = (m.score.a === null || m.score.b === null) ? "—" : `${m.score.a} - ${m.score.b}`;
                    const teams = (m.teams.a && m.teams.b) ? `<div class="muted" style="margin-top:4px">${m.teams.a} vs ${m.teams.b}</div>` : "";
                    return `<tr><td><b>${a}</b> vs <b>${b}</b>${teams}</td><td style="width:120px">${sc}</td></tr>`;
                }).join("");

                return `
        <div style="margin-top:14px">
          <div class="big">Round ${r}</div>
          <table>
            <thead><tr><th>Match</th><th>Score</th></tr></thead>
            <tbody>${rows}</tbody>
          </table>
        </div>
      `;
            }).join("");

            return groups;
        }

        document.getElementById("standings").innerHTML = standingsTable();
        document.getElementById("fixtures").innerHTML = fixturesTable();
    </script>
</body>

</html>